(this.webpackJsonpCreditCenter=this.webpackJsonpCreditCenter||[]).push([[0],{102:function(t,e){},112:function(t,e){t.exports={hello:"hello",world:"world",fuck:{world:"fuck world"},normalTitle:"normalTitle",clickMeToChangeTitle:"clickMeToChangeTitle",titleByClick:"titleByClick"}},113:function(t,e){t.exports={hello:"\u4f60\u597d",world:"\u4e16\u754c",fuck:{world:"\u5e72\u4e16\u754c"},normalTitle:"\u6807\u9898\u9ed8\u8ba4\u503c",clickMeToChangeTitle:"\u70b9\u6211\u6539\u53d8\u6807\u9898",titleByClick:"\u70b9\u51fb\u540e\u7684\u6807\u9898"}},114:function(t,e){},18:function(t,e,n){"use strict";n.r(e);var a=n(81),r=new(n.n(a).a)({filename:"db"}),o=new Proxy(r,{get:function(t,e){return function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return new Promise((function(n,r){t[e].apply(t,a.concat([function(t,e){t?r(t):n(e)}]))}))}}});e.default=o},184:function(t,e,n){var a={"./":26,"./app":73,"./app.js":73,"./boom":74,"./boom.js":74,"./db":22,"./db/":22,"./db/index":22,"./db/index.js":22,"./db/nedb":18,"./db/nedb.js":18,"./db/session":34,"./db/session.js":34,"./index":26,"./index.js":26,"./user":75,"./user.js":75};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id=184},185:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(17),i=n.n(o),s=(n(88),n(29)),c=n(2),u=n.n(c),l=n(5),d=n(9),f=n(6),h=n(13),m=n(12),p=(n(90),n(47)),g=n(1),v=n(35),b=n.n(v),w={"en-US":n(112),"zh-CN":n(113)},x=b.a.get.bind(b.a),k=function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.init({currentLocale:e,locales:w});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();k("en-US");var y=r.a.createContext(),j=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(t){var a,r=t.route;return Object(d.a)(this,n),(a=e.call(this)).interval=null,a.state={width:0,height:0,fontSize:0,interval:null,isLoading:!1,minBoomTime:1,maxBoomTime:1,showLast:!1},a.stopTimeChecker=function(){clearInterval(a.state.interval)},a.timeChecker=function(){a.context.store.state.boom.coolingTime<=0?(a.stopTimeChecker(),a.audio.dididi.pause(),a.audio.dididi.currentTime=0,a.audio.boom.play(),window.navigator.vibrate(2e3),a.context.store.set({boom:{isCooling:!1}})):a.context.store.set({boom:{coolingTime:a.context.store.state.boom.coolingTime-1}})},a.startChecker=function(){var t=setInterval(a.timeChecker,1e3);a.setState({interval:t})},a.startBoom=function(){a.startChecker(),a.audio.dididi.play()},a.restartBoom=function(){a.startBoom(),a.setState({showLast:!1})},a.handleBoomClick=function(){a.setState({isLoading:!0});var t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return Math.floor(Math.random()*(e-t+1)+t)}(Number(a.context.store.state.boom.minTime),Number(a.context.store.state.boom.maxTime));a.context.store.set({boom:{coolingTime:t,isCooling:!0}}),a.startBoom()},a.setBoomTime=function(t,e){var n=e.target.value;"max"===t?a.context.store.set({boom:{maxTime:n}}):"min"===t&&a.context.store.set({boom:{minTime:n}})},a.handleCancelBoom=function(){a.context.store.set({boom:{coolingTime:0,isCooling:!1}}),a.setState({showLast:!1}),a.audio.dididi.pause(),a.audio.dididi.currentTime=0,a.stopTimeChecker()},a.route=r,a.audio={dididi:new Audio,boom:new Audio},a.audio.dididi.src="./audio/dididi.mp3",a.audio.dididi.loop=!0,a.audio.boom.src="./audio/boom.mp3",a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){document.title="\u5b9a\u65f6\u70b8\u5f39",this.setState({width:document.body.clientWidth,height:document.body.clientHeight,fontSize:document.body.clientWidth/8}),this.context.store.state.boom.isCooling&&this.setState({showLast:!0})}}]),Object(f.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{style:{width:this.state.width,height:this.state.height,fontSize:this.state.fontSize,display:"flex",alignItems:"center",justifyContent:"center"}},this.context.store.state.boom.isCooling&&r.a.createElement("span",null,"\u70b8\u5f39\u5373\u5c06\u7206\u70b8",this.state.showLast&&r.a.createElement("span",null,r.a.createElement("button",{onClick:this.restartBoom,style:{marginTop:"20px"}},"\u7ee7\u7eed\u4e0a\u6b21\u7684\u8ba1\u65f6")),r.a.createElement("button",{onClick:this.handleCancelBoom,style:{marginTop:"20px"}},"\u53d6\u6d88\u7206\u70b8")),!this.context.store.state.boom.isCooling&&r.a.createElement("div",null,r.a.createElement("span",null,"\u8f93\u5165\u65f6\u95f4\uff1a",r.a.createElement("br",null),r.a.createElement("input",{style:{width:this.state.width/4},onChange:function(e){return t.setBoomTime("min",e)},value:this.context.store.state.boom.minTime}),"-",r.a.createElement("input",{style:{width:this.state.width/4},onChange:function(e){return t.setBoomTime("max",e)},value:this.context.store.state.boom.maxTime}),"\u79d2"),r.a.createElement("button",{onClick:this.handleBoomClick,style:{marginTop:"20px"}},"\u70b9\u71c3\u70b8\u5f39")))}}]),n}(a.Component);j.contextType=y;var C=j,O=(n(114),n(188)),T=n(48),S=n.n(T),E=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(d.a)(this,n),(t=e.call(this)).click=function(){t.context.store.set({user:{title:x("titleByClick")}})},t.switchLanguage=function(e){t.context.changeLanguage(e)},t}return Object(f.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement(O.a,{onClick:function(){return t.switchLanguage("zh-CN")},className:S.a.red},"\u5207\u6362\u5230\u4e2d\u6587"),r.a.createElement(O.a,{onClick:function(){return t.switchLanguage("en-US")},className:S.a.blue},"changeToEnglist"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(O.a,{onClick:this.click},x("clickMeToChangeTitle")),r.a.createElement(O.a,null,x(this.context.store.state.user.title)))}}]),n}(a.Component);E.contextType=y;var L=[{path:"/home",component:C},{path:"/",render:function(){return r.a.createElement(g.a,{to:"/home"})}}],I=n(187),B=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.05)",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(I.a,{size:"large",tip:"Loading..."}))}}]),n}(a.Component),_=n(46),M=n(26),N=function(){var t="production";if("development"===t){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];(e=console.log).call.apply(e,[console].concat(a))}},A=function(){var t="production";if("development"===t){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];console.log.call(console,JSON.stringify(n,null,"  "))}};window.log=N,window.logj=A;var z=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(d.a)(this,n),(t=e.call(this)).changeLanguage=function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state.store.set({app:{language:n}}),e.next=3,k(n);case 3:t.forceUpdate();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={isLoading:!0,store:""},t.quickStore={},t.actions={changeLanguage:t.changeLanguage},t.init(),t}return Object(f.a)(n,[{key:"init",value:function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initStore();case 2:this.initLanguage(),this.setState({isLoading:!1});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initStore",value:function(){var t=Object(l.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return log("\u521d\u59cb\u5316\u6570\u636e\u5e93"),e=new M.default(this,"false"),t.next=4,e.init();case 4:log("\u6570\u636e\u5e93\u52a0\u8f7d\u5b8c\u6210"),this.setState({store:e}),this.quickStore=this.state.store.state;case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initLanguage",value:function(){var t=this.quickStore.app.language;this.changeLanguage(t)}},{key:"render",value:function(){return r.a.createElement(y.Provider,{value:Object(s.a)({store:this.state.store},this.actions)},this.state.isLoading?r.a.createElement(B,null):r.a.createElement(_.a,null,r.a.createElement("div",{className:"App"},Object(p.a)(L))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},22:function(t,e,n){"use strict";n.r(e);var a=n(29),r=n(2),o=n.n(r),i=n(5),s=n(9),c=n(6),u=n(18),l=function(){function t(e){Object(s.a)(this,t),this.id=e}return Object(c.a)(t,[{key:"load",value:function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.loadDatabase();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={_id:this.id},t.next=3,u.default.findOne(e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(i.a)(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.update({_id:this.id},Object(a.a)(Object(a.a)({},e),{},{_id:this.id}),{upsert:!0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"drop",value:function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.remove({},{multi:!0});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),t}();e.default=l},26:function(t,e,n){"use strict";n.r(e);var a,r=n(2),o=n.n(r),i=n(82),s=n(5),c=n(9),u=n(6),l=function t(e,n){for(var a in e){var r=n[a];void 0!==r&&(Array.isArray(r)||r instanceof Object?e[a]=t(e[a],n[a]):e[a]=n[a])}return e},d=n(22),f=n(34),h=["user","app","boom"],m=function(){function t(e,n){Object(c.a)(this,t),this.state={},this.set=this.set.bind(e);var r="store";"true"===n&&(r+=Object(f.createSessionId)()),a=new d.default(r)}return Object(u.a)(t,[{key:"init",value:function(){var t=Object(s.a)(o.a.mark((function t(){var e,r,s,c,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.load();case 2:log("\u52a0\u8f7d\u9ed8\u8ba4\u503c"),e=Object(i.a)(h);try{for(e.s();!(r=e.n()).done;)s=r.value,c=n(184)("./".concat(s)).default,this.state[s]=c}catch(o){e.e(o)}finally{e.f()}return log("\u68c0\u67e5\u7f13\u5b58"),t.next=8,a.get();case 8:return(u=t.sent)&&(log("\u5b58\u5728\u7f13\u5b58\uff0c\u8c03\u53d6\u7f13\u5b58\u5408\u5e76"),l(this.state,u)),log("Store\u52a0\u8f7d\u5b8c\u6bd5\uff0c\u6570\u636e\u5b58\u8fdb\u672c\u5730\u7f13\u5b58"),t.next=13,a.update(this.state);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"set",value:function(){var t=Object(s.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState(function(){var t=Object(s.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.store.state,l(r,e),t.next=4,a.update(r);case 4:return t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"clear",value:function(){var t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.drop();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),t}();e.default=m},34:function(t,e,n){"use strict";n.r(e),n.d(e,"createSessionId",(function(){return a}));var a=function(){var t=sessionStorage.getItem("sessionId");return log("sessionStorage.getItem(sessionIdentifier)",sessionStorage.getItem("sessionId"),"sessionId"),t||(t=Date.now()+Math.random(),log("sessionStorage.setItem"),sessionStorage.setItem("sessionId",String(t)),log("sessionStorage.getItem(sessionIdentifier)",sessionStorage.getItem("sessionId"),"sessionId")),t}},48:function(t,e,n){t.exports={red:"test_red__1bm6M",blue:"test_blue__xoWOS"}},73:function(t,e,n){"use strict";n.r(e),e.default={language:"en-US"}},74:function(t,e,n){"use strict";n.r(e),e.default={minTime:1,maxTime:"",isCooling:!1,showClock:!1,showAudio:!0,coolingTime:0}},75:function(t,e,n){"use strict";n.r(e),e.default={title:"normalTitle"}},83:function(t,e,n){t.exports=n(185)},88:function(t,e,n){},90:function(t,e,n){},93:function(t,e){}},[[83,1,2]]]);
//# sourceMappingURL=main.1ac70546.chunk.js.map